<div ng-app="codeGamed">
  <!--- header -->
<div ng-controller="listFriendsCtrl">
  <md-toolbar class="codeGamed-toolbar">
    <div class="md-toolbar-tools" >
      <md-button ng-href="/#/">

        <i class="material-icons">home</i>

      </md-button>


      <%= link_to "<md-button  class='md-raised'>Sign out</md-button>".html_safe, signout_path, id: "sign_out" %>



      <span flex></span>


      <md-autocomplete style="width: 40%;"
                       md-selected-item-change="selectedItemChange(item)"
                       md-search-text="searchText"
                       md-search-text-change="searchTextChange(searchText)"
                       md-items="item in searchTextChange(searchText)"
                       md-menu-class="autocomplete-custom-template"
                       md-item-text="item.name"
                       md-no-cache="true"

                       placeholder="Search For Friends"
                      >


        <md-item-template>
          <img style="width: 60px; height: 60px;" src="{{item.image_url}}">

          <span >   {{item.name}}   </span>

      </md-item-template>
      </md-autocomplete>

      &nbsp;<md-button ng-if="addFriend" ng-click="sendFriendRequest(addFriend)"  class="md-raised md-primary">Add As A Friend</md-button>

      <span flex></span>
      <md-button ng-click="openRightMenu()">
        Profile
      </md-button>



    </div>
  </md-toolbar>
  <md-sidenav  md-component-id="right" md-is-open="isSidenavOpen" class="md-sidenav-right " style="position: fixed">
  <ng-md-icon ng-click="closeRightMenu()" icon="close" size="48"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" widht="48" height="48"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg></ng-md-icon>
    <md-list layout-padding>
      <md-list-item class="md-3-line" >
        <%= image_tag current_user.image_url, class: 'md-avatar' ,style: ' width: 90px; height: 100px;' %>
        <div class="md-list-item-text">
          <h3><strong><%= current_user.name %></strong></h3>
          <h4><%= current_user.total_score %> XP</h4>
        </div>
      </md-list-item>

    </md-list>

    <div ng-if="requests">
      <hr>
      <md-subheader ><h5>Pending Requests</h5></md-subheader>
      <md-list layout="column" layout-padding>

        <md-list-item  class="md-3-line" ng-repeat="friendRequest in requests" >

          <img ng-src="{{friendRequest.image_url}}" class="md-avatar" >
          <div class="md-list-item-text">

            <h3>{{friendRequest.name}}</h3>
            <!--<span style="float: right;">1</span>-->

            <md-button ng-click="acceptRequest(friendRequest)" class="md-raised md-primary" style="background-color: green;">Accept</md-button>
            <md-button ng-click="declineRequest(friendRequest)" class="md-raised md-warn">Decline</md-button>

          </div>
        </md-list-item>



      </md-list>

    </div>

  <hr>
    <md-subheader ><h4>Friends</h4></md-subheader>
    <md-list layout="column" layout-padding>

      <md-list-item  class="md-3-line" ng-repeat="friend in friends" >

        <img ng-src="{{friend.image}}" class="md-avatar" >
        <div class="md-list-item-text">

          <h3>{{friend.name}}</h3>
          <!--<span style="float: right;">1</span>-->
          <h4>{{friend.score}} XP</h4>
          <md-button ng-click="removeFriend(friend)" class="md-primary ">Remove Friend</md-button>
        </div>
      </md-list-item>



    </md-list>

  </md-sidenav>

  <div id="popupContainer"></div>


</div>
  <!--- The Body -->
  <div ng-view>

  </div>

</div>